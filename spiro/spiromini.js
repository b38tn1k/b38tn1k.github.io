var colors=["#0f0","#ff0","#0ff","#f0f"];function rcol(){return colors[int(random(colors.length))]}function rcolsub(n,o){return n[random(o)]}function coin(){return random(1)>.5}function randint(n){return random(n)}function keyPressed(){"s"==key?saveImage():generate()}function compass(n,o,r,e){return[n+r*sin(e),o+r*cos(e)]}function saveImage(){var n=year()+nf(month(),2)+nf(day(),2)+"-"+nf(hour(),2)+nf(minute(),2)+nf(second(),2);save(n+".png")}function generate(){clear();var n=rcol();background(n);for(var o=rcol(),r=rcol();o==n;)o=rcol();for(;r==o;)r=rcol();for(var e=0;e<1;e++)spiro(0.5*min(window.innerWidth,window.innerHeight),0.5*min(window.innerWidth,window.innerHeight),o,r)}function spiro(n,o,r,e){push(),translate(width/2,height/2);var i=1,t=random(n),a=random(o),c=2*PI,s=randint(10);noStroke();for(var d=t+a,l=0,f=0;f<c;f+=1e-4){d=t+a,l+=random(.001,.008);var u=compass(0,0,t+a*sin(s*f),f),h=compass(u[0],u[1],a,l),w=sqrt(h[0]*h[0]+h[1]*h[1])/d;i=lerp(-10,10,w),fill(lerpColor(color(r),color(e),.5*w)),ellipse(h[0],h[1],i,i)}pop()}function spirally(){var n=4,o=500;for(noStroke();o>=100;){for(var r=rcol(),e=rcol(),i=2*PI,t=0;t<i;t+=PI/n){println(t),push(),translate(width/2,height/2),rotate(t);for(var a=o,c=a,s=5,d=0;d<i;d+=PI/c){fill(lerpColor(color(r),color(e),c/a));var l=compass(0,0,c,d);ellipse(l[0],l[1],s,s),c--,s+=.1}pop()}n*=1.2,o-=50}}function setup(){canvas=createCanvas(window.innerWidth,window.innerHeight),smooth(8),pixelDensity(2),background(0),generate(),noStroke()}function draw(){}function touchStarted(){generate()}function touchMoved(){return!1}function touchEnded(){}function deviceTurned(){canvas=createCanvas(window.innerWidth,window.innerHeight)}window.onresize=function(){var n=window.innerWidth,o=window.innerHeight;console.log(n," ",o),canvas.size(n,o),width=n,height=o,generate()};
